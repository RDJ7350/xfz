function Banner(){this.bannergroup=$("#banner-group"),this.index=1,this.bannerWidth=798,this.prevArrow=$(".arrow-prev"),this.nextArrow=$(".arrow-next"),this.bannerUI=$("#banner-ul"),this.pageControl=$(".page-control"),this.bannerCount=this.bannerUI.children("li").length,this.listenBannerHover()}function Index(){this.loadMoreBtn=$("#load-more-btn"),this.ul=$(".list-inner-group"),this.page=2,this.category_id=0}Banner.prototype.initBanner=function(){this.bannerUI.css({width:this.bannerWidth*this.bannerCount});var n=this.bannerUI.children("li").eq(0).clone(),t=this.bannerUI.children("li").eq(this.bannerCount-1).clone();this.bannerUI.append(n),this.bannerUI.prepend(t),this.bannerUI.css({width:this.bannerWidth*(this.bannerCount+2),left:-this.bannerWidth})},Banner.prototype.animate=function(){var n;this.bannerUI.animate({left:-798*this.index},1e3),n=0===this.index?this.bannerCount-1:this.index===this.bannerCount+1?0:this.index-1,this.pageControl.children("li").addClass("active").eq(n).siblings("li").removeClass("active")},Banner.prototype.loop=function(){var n=this;n.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUI.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},3500)},Banner.prototype.toggleArrow=function(n){n?(this.prevArrow.show(),this.nextArrow.show()):(this.prevArrow.hide(),this.nextArrow.hide())},Banner.prototype.initPageControl=function(){for(var n=0;n<this.bannerCount;n++){var t=$("<li></li>");this.pageControl.append(t),0===n&&t.addClass("active")}this.pageControl.css({width:12*this.bannerCount+16+16*(this.bannerCount-1)})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannergroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenArrowClick=function(){var n=this;this.prevArrow.click(function(){0===n.index?(n.bannerUI.css({left:-n.bannerWidth*n.bannerCount}),n.index=n.bannerCount-1):n.index--,n.animate()}),this.nextArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUI.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenPageControl=function(){var e=this;this.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,e.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.loop(),this.listenArrowClick(),this.initPageControl(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this;i.loadMoreBtn.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code)if(0<n.data.length){var t=n.data,e=template("news-item",{newses:t});i.ul.append(e),i.page++}else i.loadMoreBtn.hide()}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-item").children().click(function(){var i=$(this),r=i.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:r,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t});o.ul.empty(),o.ul.append(e),o.page=2,o.category_id=r,i.addClass("active").siblings().removeClass("active"),o.loadMoreBtn.show(),console.log("success")}}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJncm91cCIsIiQiLCJpbmRleCIsImJhbm5lcldpZHRoIiwicHJldkFycm93IiwibmV4dEFycm93IiwiYmFubmVyVUkiLCJwYWdlQ29udHJvbCIsImJhbm5lckNvdW50IiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJsaXN0ZW5CYW5uZXJIb3ZlciIsIkluZGV4IiwibG9hZE1vcmVCdG4iLCJ1bCIsInBhZ2UiLCJjYXRlZ29yeV9pZCIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJjc3MiLCJ3aWR0aCIsImZpcnN0QmFubmVyIiwiZXEiLCJjbG9uZSIsImxhc3RCYW5uZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwibGVmdCIsImFuaW1hdGUiLCJhZGRDbGFzcyIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJsb29wIiwic2VsZiIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0b2dnbGVBcnJvdyIsImlzU2hvdyIsInNob3ciLCJoaWRlIiwiaW5pdFBhZ2VDb250cm9sIiwiaSIsImNpcmNsZSIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImxpc3RlblBhZ2VDb250cm9sIiwiZWFjaCIsIm9iaiIsInJ1biIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwiZGF0YSIsInAiLCJzdWNjZXNzIiwicmVzdWx0IiwibmV3c2VzIiwidHBsIiwidGVtcGxhdGUiLCJsaXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50IiwiY3VycmVudExpIiwiYXR0ciIsImVtcHR5IiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsU0FDTEMsS0FBS0MsWUFBY0MsRUFBRSxpQkFDckJGLEtBQUtHLE1BQVEsRUFDYkgsS0FBS0ksWUFBYyxJQUNuQkosS0FBS0ssVUFBWUgsRUFBRSxlQUNuQkYsS0FBS00sVUFBWUosRUFBRSxl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LENBQ3ZCLElBQUlDLEVBQVNELEVBQWEsS0FDdEJFLEVBQU1DLFNBQVMsWUFBYSxDQUFDRixPQUFVQSxJQUUzQzFCLEVBQUtuQixHQUFHbUQsUUFDUmhDLEVBQUtuQixHQUFHVyxPQUFPbUMsR0FDZjNCLEVBQUtsQixLQUFLLEVBQ1ZrQixFQUFLakIsWUFBY0EsRUFDbkIrQyxFQUFVbEMsU0FBUyxVQUFVQyxXQUFXQyxZQUFZLFVBQ3BERSxFQUFLcEIsWUFBWXlCLE9BQ2pCNEIsUUFBUUMsSUFBSSxrQkFPaEN2RCxNQUFNSyxVQUFVaUMsSUFBTSxXQUNQbkQsS0FDTm9ELHNCQURNcEQsS0FFTitELDZCQUdUN0QsRUFBRSxZQUNlLElBQUlILFFBQ1ZvRCxPQUVLLElBQUl0QyxPQUNWc0MiLCJmaWxlIjoiaW5kZXgubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gQmFubmVyKCkge1xyXG4gICAgdGhpcy5iYW5uZXJncm91cCA9ICQoXCIjYmFubmVyLWdyb3VwXCIpO1xyXG4gICAgdGhpcy5pbmRleCA9IDE7XHJcbiAgICB0aGlzLmJhbm5lcldpZHRoID0gNzk4O1xyXG4gICAgdGhpcy5wcmV2QXJyb3cgPSAkKFwiLmFycm93LXByZXZcIik7XHJcbiAgICB0aGlzLm5leHRBcnJvdyA9ICQoXCIuYXJyb3ctbmV4dFwiKTtcclxuICAgIHRoaXMuYmFubmVyVUkgPSAkKFwiI2Jhbm5lci11bFwiKTtcclxuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKFwiLnBhZ2UtY29udHJvbFwiKTtcclxuICAgIHRoaXMuYmFubmVyQ291bnQgPSB0aGlzLmJhbm5lclVJLmNoaWxkcmVuKCdsaScpLmxlbmd0aDtcclxuICAgIHRoaXMubGlzdGVuQmFubmVySG92ZXIoKTtcclxufVxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0QmFubmVyID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMuYmFubmVyVUkuY3NzKHtcIndpZHRoXCI6dGhpcy5iYW5uZXJXaWR0aCp0aGlzLmJhbm5lckNvdW50fSk7XHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSB0aGlzLmJhbm5lclVJLmNoaWxkcmVuKFwibGlcIikuZXEoMCkuY2xvbmUoKTtcclxuICAgIHZhciBsYXN0QmFubmVyID0gdGhpcy5iYW5uZXJVSS5jaGlsZHJlbihcImxpXCIpLmVxKHRoaXMuYmFubmVyQ291bnQtMSkuY2xvbmUoKTtcclxuICAgIHRoaXMuYmFubmVyVUkuYXBwZW5kKGZpcnN0QmFubmVyKTtcclxuICAgIHRoaXMuYmFubmVyVUkucHJlcGVuZChsYXN0QmFubmVyKTtcclxuICAgIHRoaXMuYmFubmVyVUkuY3NzKHtcIndpZHRoXCI6dGhpcy5iYW5uZXJXaWR0aCoodGhpcy5iYW5uZXJDb3VudCsyKSxcImxlZnRcIjotdGhpcy5iYW5uZXJXaWR0aH0pXHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmFuaW1hdGU9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgaW5kZXg7XHJcbiAgICB0aGlzLmJhbm5lclVJLmFuaW1hdGUoe1wibGVmdFwiOiAtNzk4ICogdGhpcy5pbmRleH0sMTAwMCk7XHJcbiAgICBpZih0aGlzLmluZGV4PT09MCl7XHJcbiAgICAgICAgaW5kZXggPSB0aGlzLmJhbm5lckNvdW50IC0gMTtcclxuICAgIH1lbHNlIGlmKHRoaXMuaW5kZXg9PT10aGlzLmJhbm5lckNvdW50ICsgMSl7XHJcbiAgICAgICAgaW5kZXggPSAwO1xyXG4gICAgfWVsc2Uge1xyXG4gICAgICAgIGluZGV4ID0gdGhpcy5pbmRleCAtIDE7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIikuZXEoaW5kZXgpLnNpYmxpbmdzKFwibGlcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgLy8gYmFubmVyVUkuY3NzKHtcImxlZnRcIjogLTc5OH0pO1xyXG4gICAgc2VsZi50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgaWYoc2VsZi5pbmRleD49c2VsZi5iYW5uZXJDb3VudCsxKXtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVSS5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSk7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXg9MjtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXgrK1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0sMzUwMCk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24oaXNTaG93KXtcclxuICAgIGlmKGlzU2hvdyl7XHJcbiAgICAgICAgdGhpcy5wcmV2QXJyb3cuc2hvdygpO1xyXG4gICAgICAgIHRoaXMubmV4dEFycm93LnNob3coKTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgdGhpcy5wcmV2QXJyb3cuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMubmV4dEFycm93LmhpZGUoKTtcclxuICAgIH1cclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdFBhZ2VDb250cm9sID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYmFubmVyQ291bnQ7IGkrKykge1xyXG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xyXG4gICAgICAgIHRoaXMucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XHJcbiAgICAgICAgaWYoaSA9PT0gMCl7XHJcbiAgICAgICAgICAgIGNpcmNsZS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sLmNzcyh7XCJ3aWR0aFwiOjEyKnRoaXMuYmFubmVyQ291bnQrOCoyKzE2Kih0aGlzLmJhbm5lckNvdW50LTEpfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5iYW5uZXJncm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVyKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KHRydWUpO1xyXG5cclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmxvb3AoKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KGZhbHNlKTtcclxuICAgIH0pXHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5wcmV2QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXggPT09IDApe1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVJLmNzcyh7XCJsZWZ0XCI6LXNlbGYuYmFubmVyV2lkdGgqc2VsZi5iYW5uZXJDb3VudH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4LS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5uZXh0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHNlbGYuaW5kZXggPT09IHNlbGYuYmFubmVyQ291bnQgKyAxKXtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVSS5jc3Moe1wibGVmdFwiOi1zZWxmLmJhbm5lcldpZHRofSlcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4KysgO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5saXN0ZW5QYWdlQ29udHJvbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIG9iaikge1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleCArIDE7XHJcbiAgICAgICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5pbml0QmFubmVyKCk7XHJcbiAgICB0aGlzLmxvb3AoKTtcclxuICAgIHRoaXMubGlzdGVuQXJyb3dDbGljaygpO1xyXG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKTtcclxuICAgIHRoaXMubGlzdGVuUGFnZUNvbnRyb2woKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIEluZGV4KCl7XHJcbiAgICB0aGlzLmxvYWRNb3JlQnRuID0gJChcIiNsb2FkLW1vcmUtYnRuXCIpO1xyXG4gICAgdGhpcy51bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMucGFnZSA9IDI7XHJcbiAgICB0aGlzLmNhdGVnb3J5X2lkID0gMDtcclxufVxyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkxvYWRNb3JlRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5sb2FkTW9yZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAncCc6IHNlbGYucGFnZSxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IHNlbGYuY2F0ZWdvcnlfaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2RhdGEnXS5sZW5ndGg+MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwibmV3cy1pdGVtXCIsIHtcIm5ld3Nlc1wiOiBuZXdzZXN9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51bC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRNb3JlQnRuLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuSW5kZXgucHJvdG90eXBlLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIGxpc3RpdGVtID0gJChcIi5saXN0LWl0ZW1cIik7XHJcbiAgICBsaXN0aXRlbS5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDlvZPliY3pgInkuK3nmoRsaeagh+etvlxyXG4gICAgICAgIHZhciBjdXJyZW50TGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGN1cnJlbnRMaS5hdHRyKFwiZGF0YS1jYXRlZ29yeVwiKTtcclxuICAgICAgICB2YXIgcGFnZSA9IDE7XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL2xpc3QvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOiBjYXRlZ29yeV9pZCxcclxuICAgICAgICAgICAgICAgICdwJzogcGFnZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLCB7XCJuZXdzZXNcIjogbmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5bCG5b2T5YmN5qCH562+5LiL55qE5omA5pyJ5a2Q5YWD57Sg5Yig6ZmkXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi51bC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudWwuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYWdlPTI7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYXRlZ29yeV9pZCA9IGNhdGVnb3J5X2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkTW9yZUJ0bi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdWNjZXNzXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkluZGV4LnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5Mb2FkTW9yZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuICAgIGJhbm5lci5ydW4oKTtcclxuXHJcbiAgICB2YXIgaW5kZXggPSBuZXcgSW5kZXgoKTtcclxuICAgIGluZGV4LnJ1bigpO1xyXG59KTtcclxuICAgIFxyXG5cclxuIl19
