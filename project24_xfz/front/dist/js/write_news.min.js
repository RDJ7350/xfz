function uploadFile(){}uploadFile.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},uploadFile.prototype.listenUploadFileEvent=function(){var t=$("#thumbnail-btn");t.change(function(){var e=t[0].files[0],o=new FormData;o.append("file",e),xfzajax.post({url:"/cms/upload_file/",data:o,processData:!1,contentType:!1,success:function(e){if(200===e.code){var o=e.data.url;$("#thumbnail-form").val(o),console.log(o)}}})})},uploadFile.prototype.listenUploadFileToQiNiuEvent=function(){var s=this;$("#thumbnail-btn").change(function(){var r=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200===e.code){var o=e.data.token,t=(new Date).getTime()+".",i=r.name.split("."),a=t+i[i.length-1],n={fname:a,params:{},mimeType:["image/png","image/gif","image/jpeg"]},l={useCdnDomain:!0,retryCount:6,region:qiniu.region.z2};qiniu.upload(r,a,o,n,l).subscribe({next:s.handleFileUploadProgress,error:s.handleFileUploadError,complete:s.handleFileUploadComplete})}}})})},uploadFile.prototype.handleFileUploadProgress=function(e){var o=e.total.percent.toFixed(0)+"%";uploadFile.progressGroup.show();var t=uploadFile.progressBar;t.css({width:o}),t.text(o)},uploadFile.prototype.handleFileUploadError=function(e){window.messageBox.showError(e.message),console.log(e.message),uploadFile.progressGroup.hide()},uploadFile.prototype.handleFileUploadComplete=function(e){console.log(e);var o=uploadFile.progressGroup,t=$("input[name='thumbnail']");o.hide();var i="http://ptr0aa5vs.bkt.clouddn.com"+e.key;t.val(i);var a=uploadFile.progressBar;a.css({width:"0%"}),a.text("0%")},uploadFile.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(e){var o=$(this).attr("data-news-id"),t="";t=o?"/cms/edit_news/":"/cms/write_news/",e.preventDefault();var i=$("input[name='title']").val(),a=$("select[name='category']").val(),n=$("input[name='desc']").val(),l=$("input[name='thumbnail']").val(),r=window.ue.getContent();xfzajax.post({url:t,data:{title:i,desc:n,thumbnail:l,category:a,content:r,pk:o},success:function(e){200===e.code&&(o?xfzalert.alertSuccess("恭喜！新闻编辑成功！",function(){console.log("编辑新闻id"+o)}):xfzalert.alertSuccess("恭喜！新闻发表成功！",function(){console.log("发表新闻id"+o)}))}})})},uploadFile.prototype.run=function(){var e=this;e.listenUploadFileEvent(),e.listenUploadFileToQiNiuEvent(),e.initUEditor(),e.listenSubmitEvent()},$(function(){(new uploadFile).run(),uploadFile.progressGroup=$("#progress-group"),uploadFile.progressBar=$(".progress-bar")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsidXBsb2FkRmlsZSIsInByb3RvdHlwZSIsImluaXRVRWRpdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsInVwbG9hZEJ0biIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ2YWwiLCJjb25zb2xlIiwibG9nIiwibGlzdGVuVXBsb2FkRmlsZVRvUWlOaXVFdmVudCIsInNlbGYiLCJ0aGlzIiwiZ2V0IiwidG9rZW4iLCJwcmVfa2V5cyIsIkRhdGUiLCJnZXRUaW1lIiwibmV4dF9rZXlzIiwibmFtZSIsInNwbGl0Iiwia2V5IiwibGVuZ3RoIiwicHV0RXh0cmEiLCJmbmFtZSIsInBhcmFtcyIsIm1pbWVUeXBlIiwiY29uZmlnIiwidXNlQ2RuRG9tYWluIiwicmV0cnlDb3VudCIsInJlZ2lvbiIsInFpbml1IiwiejIiLCJ1cGxvYWQiLCJzdWJzY3JpYmUiLCJuZXh0IiwiaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzIiwiZXJyb3IiLCJoYW5kbGVGaWxlVXBsb2FkRXJyb3IiLCJjb21wbGV0ZSIsImhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSIsInJlc3BvbnNlIiwicGVyY2VudFRleHQiLCJ0b3RhbCIsInBlcmNlbnQiLCJ0b0ZpeGVkIiwicHJvZ3Jlc3NHcm91cCIsInNob3ciLCJwcm9ncmVzc0JhciIsImNzcyIsIndpZHRoIiwidGV4dCIsIm1lc3NhZ2VCb3giLCJzaG93RXJyb3IiLCJtZXNzYWdlIiwiaGlkZSIsInRodW1ibmFpbElucHV0IiwibGlzdGVuU3VibWl0RXZlbnQiLCJjbGljayIsImV2ZW50IiwibmV3c19pZCIsImF0dHIiLCJwcmV2ZW50RGVmYXVsdCIsInRpdGxlIiwiY2F0ZWdvcnkiLCJkZXNjIiwidGh1bWJuYWlsIiwiY29udGVudCIsImdldENvbnRlbnQiLCJwayIsInhmemFsZXJ0IiwiYWxlcnRTdWNjZXNzIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxjQUlUQSxXQUFXQyxVQUFVQyxZQUFjLFdBQy9CQyxPQUFPQyxHQUFLQyxHQUFHQyxVQUFVLFNBQVMsQ0FDOUJDLG1CQUFzQixJQUN0QkMsVUFBYSxzQkFJckJSLFdBQVdDLFVBQVVRLHNCQUF3QixXQUN6QyxJQUFJQyxFQUFZQyxFQUFFLGtCQUNsQkQsRUFBVUUsT0FBTyxXQUNiLElBQUlDLEVBQU9ILEVBQVUsR0FBR0ksTUFBTSxHQUMxQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFPSixHQUN2QkssUUFBUUMsS0FBSyxDQUNUQyxJQUFPLG9CQUNQQyxLQUFRTixFQUNSTyxhQUFlLEVBQ2ZDLGFBQWUsRUFDZkMsUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUFVLENBQ3ZCLElBQUlMLEVBQU1LLEVBQWEsS0FBTyxJQUNUZCxFQUFFLG1CQUNSZSxJQUFJTixHQUNuQk8sUUFBUUMsSUFBSVIsVUFPaENwQixXQUFXQyxVQUFVNEIsNkJBQStCLFdBQ2hELElBQUlDLEVBQU9DLEtBQ0twQixFQUFFLGtCQUNSQyxPQUFPLFdBQ2IsSUFBSUMsRUFBT2tCLEtBQUtqQixNQUFNLEdBQ3RCSSxRQUFRYyxJQUFLLENBQ1RaLElBQU8sZ0JBQ1BJLFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVSxDQUN2QixJQUFJUSxFQUFRUixFQUFhLEtBQVMsTUFDOUJTLEdBQVcsSUFBS0MsTUFBUUMsVUFBWSxJQUNwQ0MsRUFBWXhCLEVBQUt5QixLQUFLQyxNQUFNLEtBRTVCQyxFQUFNTixFQUFXRyxFQUFVQSxFQUFVSSxPQUFPLEdBQzVDQyxFQUFXLENBQ1hDLE1BQU9ILEVBQ1BJLE9BQVEsR0FDUkMsU0FBVSxDQUFDLFlBQWEsWUFBYSxlQUVyQ0MsRUFBUyxDQUNUQyxjQUFjLEVBQ2RDLFdBQVksRUFDWkMsT0FBUUMsTUFBTUQsT0FBT0UsSUFFUkQsTUFBTUUsT0FBT3ZDLEVBQU0yQixFQUFLUCxFQUFPUyxFQUFVSSxHQUMvQ08sVUFBVyxDQUNsQkMsS0FBUXhCLEVBQUt5Qix5QkFDYkMsTUFBUzFCLEVBQUsyQixzQkFDZEMsU0FBWTVCLEVBQUs2QixrQ0FRekMzRCxXQUFXQyxVQUFVc0QseUJBQTJCLFNBQVNLLEdBQ3JELElBRUlDLEVBRlFELEVBQVNFLE1BQ0RDLFFBQ01DLFFBQVEsR0FBRyxJQUNqQmhFLFdBQVdpRSxjQUNqQkMsT0FDZCxJQUFJQyxFQUFjbkUsV0FBV21FLFlBQzdCQSxFQUFZQyxJQUFJLENBQUNDLE1BQVNSLElBQzFCTSxFQUFZRyxLQUFLVCxJQUdyQjdELFdBQVdDLFVBQVV3RCxzQkFBd0IsU0FBU0QsR0FDbERyRCxPQUFPb0UsV0FBV0MsVUFBVWhCLEVBQU1pQixTQUNsQzlDLFFBQVFDLElBQUk0QixFQUFNaUIsU0FDRXpFLFdBQVdpRSxjQUNqQlMsUUFHbEIxRSxXQUFXQyxVQUFVMEQseUJBQTJCLFNBQVNDLEdBQ3JEakMsUUFBUUMsSUFBSWdDLEdBQ1osSUFBSUssRUFBZ0JqRSxXQUFXaUUsY0FDM0JVLEVBQWlCaEUsRUFBRSwyQkFDdkJzRCxFQUFjUyxPQUNkLElBRUl0RCxFQUZTLG1DQUNFd0MsRUFBU3BCLElBRXhCbUMsRUFBZWpELElBQUlOLEdBQ25CLElBQUkrQyxFQUFjbkUsV0FBV21FLFlBQzdCQSxFQUFZQyxJQUFJLENBQUNDLE1BQVMsT0FDMUJGLEVBQVlHLEtBQUssT0FHckJ0RSxXQUFXQyxVQUFVMkUsa0JBQW9CLFdBQ3hCakUsRUFBRSxlQUNSa0UsTUFBTSxTQUFVQyxHQUNuQixJQUNJQyxFQURNcEUsRUFBRW9CLE1BQ01pRCxLQUFLLGdCQUNuQjVELEVBQU0sR0FFTkEsRUFEQTJELEVBQ00sa0JBRUEsbUJBRVZELEVBQU1HLGlCQUNOLElBQUlDLEVBQVF2RSxFQUFFLHVCQUF1QmUsTUFDakN5RCxFQUFXeEUsRUFBRSwyQkFBMkJlLE1BQ3hDMEQsRUFBT3pFLEVBQUUsc0JBQXNCZSxNQUMvQjJELEVBQVkxRSxFQUFFLDJCQUEyQmUsTUFDekM0RCxFQUFVbkYsT0FBT0MsR0FBR21GLGFBRXhCckUsUUFBUUMsS0FBSyxDQUNUQyxJQUFPQSxFQUNQQyxLQUFRLENBQ0o2RCxNQUFTQSxFQUNURSxLQUFRQSxFQUNSQyxVQUFhQSxFQUNiRixTQUFZQSxFQUNaRyxRQUFXQSxFQUNYRSxHQUFNVCxHQUVWdkQsUUFBVyxTQUFVQyxHQUNNLE1BQW5CQSxFQUFhLE9BQ1RzRCxFQUNBVSxTQUFTQyxhQUFhLGFBQWMsV0FFaEMvRCxRQUFRQyxJQUFJLFNBQVNtRCxLQUd6QlUsU0FBU0MsYUFBYSxhQUFjLFdBRWhDL0QsUUFBUUMsSUFBSSxTQUFTbUQsWUFTakQvRSxXQUFXQyxVQUFVMEYsSUFBTSxXQUN2QixJQUFJN0QsRUFBT0MsS0FDWEQsRUFBS3JCLHdCQUNMcUIsRUFBS0QsK0JBQ0xDLEVBQUs1QixjQUNMNEIsRUFBSzhDLHFCQUdUakUsRUFBRSxZQUNlLElBQUlYLFlBQ1YyRixNQUNQM0YsV0FBV2lFLGNBQWdCdEQsRUFBRSxtQkFDN0JYLFdBQVdtRSxZQUFjeEQsRUFBRSIsImZpbGUiOiJ3cml0ZV9uZXdzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHVwbG9hZEZpbGUoKSB7XHJcblxyXG59XHJcblxyXG51cGxvYWRGaWxlLnByb3RvdHlwZS5pbml0VUVkaXRvciA9IGZ1bmN0aW9uICgpe1xyXG4gICAgd2luZG93LnVlID0gVUUuZ2V0RWRpdG9yKCdlZGl0b3InLHtcclxuICAgICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0JzogNDAwLFxyXG4gICAgICAgICdzZXJ2ZXJVcmwnOiAnL3VlZGl0b3IvdXBsb2FkLydcclxuICAgIH0pO1xyXG59O1xyXG5cclxudXBsb2FkRmlsZS5wcm90b3R5cGUubGlzdGVuVXBsb2FkRmlsZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciB1cGxvYWRCdG4gPSAkKFwiI3RodW1ibmFpbC1idG5cIik7XHJcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHVwbG9hZEJ0blswXS5maWxlc1swXTtcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLGZpbGUpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXN1bHRbJ2RhdGEnXVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbElucHV0ID0gJChcIiN0aHVtYm5haWwtZm9ybVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxJbnB1dC52YWwodXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG51cGxvYWRGaWxlLnByb3RvdHlwZS5saXN0ZW5VcGxvYWRGaWxlVG9RaU5pdUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB1cGxvYWRCdG4gPSAkKFwiI3RodW1ibmFpbC1idG5cIik7XHJcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoIHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3FudG9rZW4vJyxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0WydkYXRhJ11bJ3Rva2VuJ107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByZV9rZXlzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKSArIFwiLlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXh0X2tleXMgPSBmaWxlLm5hbWUuc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluacgOWQjuS4gOS4quaVsOe7hOWFg+e0oO+8jOS5n+WPr+S7peS9v+eUqHBvcCgp5pa55rOVXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHByZV9rZXlzICsgbmV4dF9rZXlzW25leHRfa2V5cy5sZW5ndGgtMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB1dEV4dHJhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbmFtZToga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogWydpbWFnZS9wbmcnLCAnaW1hZ2UvZ2lmJywgJ2ltYWdlL2pwZWcnXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlQ2RuRG9tYWluOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyeUNvdW50OiA2LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHFpbml1LnJlZ2lvbi56MlxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBxaW5pdS51cGxvYWQoZmlsZSwga2V5LCB0b2tlbiwgcHV0RXh0cmEsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpYmUgKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQnOiBzZWxmLmhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJzogc2VsZi5oYW5kbGVGaWxlVXBsb2FkRXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjb21wbGV0ZSc6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufTtcclxuXHJcbnVwbG9hZEZpbGUucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyA9IGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgIHZhciB0b3RhbCA9IHJlc3BvbnNlLnRvdGFsO1xyXG4gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xyXG4gICAgdmFyIHBlcmNlbnRUZXh0ID0gcGVyY2VudC50b0ZpeGVkKDApK1wiJVwiO1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSB1cGxvYWRGaWxlLnByb2dyZXNzR3JvdXA7XHJcbiAgICBwcm9ncmVzc0dyb3VwLnNob3coKTtcclxuICAgIHZhciBwcm9ncmVzc0JhciA9IHVwbG9hZEZpbGUucHJvZ3Jlc3NCYXI7XHJcbiAgICBwcm9ncmVzc0Jhci5jc3Moe1wid2lkdGhcIjogcGVyY2VudFRleHR9KTtcclxuICAgIHByb2dyZXNzQmFyLnRleHQocGVyY2VudFRleHQpO1xyXG59O1xyXG5cclxudXBsb2FkRmlsZS5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZEVycm9yID0gZnVuY3Rpb24oZXJyb3Ipe1xyXG4gICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9IHVwbG9hZEZpbGUucHJvZ3Jlc3NHcm91cDtcclxuICAgIHByb2dyZXNzR3JvdXAuaGlkZSgpO1xyXG59O1xyXG5cclxudXBsb2FkRmlsZS5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlID0gZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSB1cGxvYWRGaWxlLnByb2dyZXNzR3JvdXA7XHJcbiAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIik7XHJcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcclxuICAgIHZhciBkb21haW4gPSBcImh0dHA6Ly9wdHIwYWE1dnMuYmt0LmNsb3VkZG4uY29tXCI7XHJcbiAgICB2YXIgZmlsZW5hbWUgPSByZXNwb25zZS5rZXk7XHJcbiAgICB2YXIgdXJsID0gZG9tYWluICsgZmlsZW5hbWU7XHJcbiAgICB0aHVtYm5haWxJbnB1dC52YWwodXJsKTtcclxuICAgIHZhciBwcm9ncmVzc0JhciA9IHVwbG9hZEZpbGUucHJvZ3Jlc3NCYXI7XHJcbiAgICBwcm9ncmVzc0Jhci5jc3Moe1wid2lkdGhcIjogXCIwJVwiIH0pO1xyXG4gICAgcHJvZ3Jlc3NCYXIudGV4dChcIjAlXCIpO1xyXG59O1xyXG5cclxudXBsb2FkRmlsZS5wcm90b3R5cGUubGlzdGVuU3VibWl0RXZlbnQgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHN1Ym1pdCA9ICQoXCIjc3VibWl0LWJ0blwiKTtcclxuICAgIHN1Ym1pdC5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgYnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgbmV3c19pZCA9IGJ0bi5hdHRyKCdkYXRhLW5ld3MtaWQnKTtcclxuICAgICAgICB2YXIgdXJsID0gXCJcIjtcclxuICAgICAgICBpZiAobmV3c19pZCl7XHJcbiAgICAgICAgICAgIHVybCA9ICcvY21zL2VkaXRfbmV3cy8nO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHVybCA9ICcvY21zL3dyaXRlX25ld3MvJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0ndGl0bGUnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgY2F0ZWdvcnkgPSAkKFwic2VsZWN0W25hbWU9J2NhdGVnb3J5J11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGRlc2MgPSAkKFwiaW5wdXRbbmFtZT0nZGVzYyddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciB0aHVtYm5haWwgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB3aW5kb3cudWUuZ2V0Q29udGVudCgpO1xyXG5cclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgJ2Rlc2MnOiBkZXNjLFxyXG4gICAgICAgICAgICAgICAgJ3RodW1ibmFpbCc6IHRodW1ibmFpbCxcclxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQnOiBjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogbmV3c19pZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIuaBreWWnO+8geaWsOmXu+e8lui+keaIkOWKn++8gVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIue8lui+keaWsOmXu2lkXCIrbmV3c19pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0U3VjY2VzcyhcIuaBreWWnO+8geaWsOmXu+WPkeihqOaIkOWKn++8gVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Y+R6KGo5paw6Ze7aWRcIituZXdzX2lkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbnVwbG9hZEZpbGUucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubGlzdGVuVXBsb2FkRmlsZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblVwbG9hZEZpbGVUb1FpTml1RXZlbnQoKTtcclxuICAgIHNlbGYuaW5pdFVFZGl0b3IoKTtcclxuICAgIHNlbGYubGlzdGVuU3VibWl0RXZlbnQoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHVwbG9hZCA9IG5ldyB1cGxvYWRGaWxlKCk7XHJcbiAgICB1cGxvYWQucnVuKCk7XHJcbiAgICB1cGxvYWRGaWxlLnByb2dyZXNzR3JvdXAgPSAkKFwiI3Byb2dyZXNzLWdyb3VwXCIpO1xyXG4gICAgdXBsb2FkRmlsZS5wcm9ncmVzc0JhciA9ICQoXCIucHJvZ3Jlc3MtYmFyXCIpO1xyXG59KTsiXX0=
